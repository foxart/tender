<script type="text/javascript">
	$(document).ready(function () {
		$('#factory-form-update #factory_country').autocomplete({
			source: function (request, response) {
				$.ajax({
					url: '{{ geo_country_url }}',
					type: "GET",
					dataType: "json",
					data: {
						geo_country: request.term
					},
					success: function (data) {
						response($.map(data, function (item) {
							return item;
						}));
					}
				});
			},
			minLength: 1
		});
		$('#factory-form-update #factory_region').autocomplete({
			source: function (request, response) {
				$.ajax({
					url: '{{ geo_region_url }}',
					type: "GET",
					dataType: "json",
					data: {
						geo_country: $('#factory-form-update input[name="factory_country"]').val(),
						geo_region: request.term
					},
					success: function (data) {
						response($.map(data, function (item) {
							return item;
						}));
					}
				});
			},
			minLength: 1
		});
		$('#factory-form-update #factory_city').autocomplete({
			source: function (request, response) {
				$.ajax({
					url: '{{ geo_city_url }}',
					type: "GET",
					dataType: "json",
					data: {
						geo_country: $('#factory-form-update input[name="factory_country"]').val(),
						geo_region: $('#factory-form-update input[name="factory_region"]').val(),
						geo_city: request.term
					},
					success: function (data) {
						response($.map(data, function (item) {
							return item;
						}));
					}
				});
			},
			minLength: 1
		});
	});
</script>

<div id="factory-form-update" class="modal fade">
	<div class="modal-dialog">
		<div class="modal-content">
			<form class="bs-modal form-horizontal" name="factory-form-update" method="post" action="#">
				<div class="modal-header">
					<button type="button" class="cancel close">
						<span>&times;</span>
					</button>
					<h3 class="modal-title">Change company contact</h3>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-12 text-center">
							<div class="form-group form-group-sm">
								<div class="col-md-12 text-center has-feedback">
									<input id="factory_fake" class="form-control hidden" name="factory_fake"/>
									<div class="help-block"></div>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_country">Country</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_country" class="form-control" name="factory_country" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>
							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_region">Region</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_region" class="form-control" name="factory_region" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>
							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_city">City</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_city" class="form-control" name="factory_city" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>
							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_district">District</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_district" class="form-control" name="factory_district" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>
							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_street">Street</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_street" class="form-control" name="factory_street" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_house">House â„–</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_house" class="form-control" name="factory_house" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>
							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_postal">Postal code</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_postal" class="form-control" name="factory_postal" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>
							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_email">Email</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_email" class="form-control" name="factory_email" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-md-3 control-label" for="factory_phone">Phone</label>
								<div class="col-md-9 has-feedback">
									<input id="factory_phone" class="form-control" name="factory_phone" type="text" value="">
									<span class="form-control-feedback"></span>
									<div class="help-block"></div>
								</div>
							</div>

						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button class="submit btn btn-primary" type="submit">Submit</button>
					<a class="cancel btn btn-default pull-right" href="#">Close</a>
				</div>
			</form>
		</div>
	</div>
</div>

